<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loja do Realm</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Varela+Round&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <nav class="navbar">
        <div class="logo">
            <img src="../../dcmine.png" alt="Logo Rocha Projetos">
            Rocha <span>Projetos</span>
        </div>
        <button class="nav-toggle" aria-expanded="false" aria-label="Abrir menu">
            <svg width="22" height="16" viewBox="0 0 22 16" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <rect width="22" height="2" rx="1" fill="currentColor"></rect>
                <rect y="7" width="22" height="2" rx="1" fill="currentColor"></rect>
                <rect y="14" width="22" height="2" rx="1" fill="currentColor"></rect>
            </svg>
        </button>
        <div class="nav-links">
            <a href="../../index.html#inicio">InÃ­cio</a>
            <a href="loja.html" class="active">Loja</a>
            <a href="com_historia.html">Guia do Realm</a>
        </div>
    </nav>

    <header class="store-hero">
        <h1>Loja do Realm</h1>
        <p>Escolha o kit ideal para vocÃª. Compras realizadas via Discord com um administrador.</p>
    </header>

    <main class="kits">
        <section class="kit-card">
            <div class="kit-header">
                <div class="kit-title">
                    <img src="png/Magma_Cube.png" alt="Ãcone Kit Magna EssÃªncia">
                    <span>Kit Magna EssÃªncia</span>
                </div>
                <div class="kit-actions">
                    <span class="kit-price">R$1,00</span>
                    <a class="kit-buy" href="#" data-discord="https://discord.com/channels/1467346816403243233/1467562728108458140">Comprar Kit</a>
                </div>
            </div>
            <div class="kit-items">
                <div class="kit-item" data-item="espadadima" data-kit="Kit Magna EssÃªncia" data-preco="R$1,00">
                    <img src="png/espadadima.gift" alt="Espada de Diamante">
                    <h4>Espada de Diamante</h4>
                </div>
                <div class="kit-item" data-item="picaretadima" data-kit="Kit Magna EssÃªncia" data-preco="R$1,00">
                    <img src="png/picaretadima.gift" alt="Picareta de Diamante">
                    <h4>Picareta de Diamante</h4>
                </div>
                <div class="kit-item" data-item="machadodima" data-kit="Kit Magna EssÃªncia" data-preco="R$1,00">
                    <img src="png/machadodima.gift" alt="Machado de Diamante">
                    <h4>Machado de Diamante</h4>
                </div>
                <div class="kit-item" data-item="padima" data-kit="Kit Magna EssÃªncia" data-preco="R$1,00">
                    <img src="png/padima.gift" alt="PÃ¡ de Diamante">
                    <h4>PÃ¡ de Diamante</h4>
                </div>
            </div>
        </section>

        <section class="kit-card">
            <div class="kit-header">
                <div class="kit-title">
                    <img src="png/Magma_Cube_SUPER.png" alt="Ãcone Kit Magna Soberano">
                    <span>Kit Magna Soberano</span>
                </div>
                <div class="kit-actions">
                    <span class="kit-price">R$2,00</span>
                    <a class="kit-buy" href="#" data-discord="https://discord.com/channels/1467346816403243233/1467562728108458140">Comprar Kit</a>
                </div>
            </div>
            <div class="kit-items">
                <div class="kit-item" data-item="espadadima_soberano" data-kit="Kit Magna Soberano" data-preco="R$2,00">
                    <img src="png/espadadima.gift" alt="Espada de Diamante">
                    <h4>Espada de Diamante</h4>
                </div>
                <div class="kit-item" data-item="picaretadima_soberano" data-kit="Kit Magna Soberano" data-preco="R$2,00">
                    <img src="png/picaretadima.gift" alt="Picareta de Diamante">
                    <h4>Picareta de Diamante</h4>
                </div>
                <div class="kit-item" data-item="machadodima_soberano" data-kit="Kit Magna Soberano" data-preco="R$2,00">
                    <img src="png/machadodima.gift" alt="Machado de Diamante">
                    <h4>Machado de Diamante</h4>
                </div>
                <div class="kit-item" data-item="padima_soberano" data-kit="Kit Magna Soberano" data-preco="R$2,00">
                    <img src="png/padima.gift" alt="PÃ¡ de Diamante">
                    <h4>PÃ¡ de Diamante</h4>
                </div>
                <div class="kit-item" data-item="helmet_soberano" data-kit="Kit Magna Soberano" data-preco="R$2,00">
                    <img src="png/Diamond_Helmet.png" alt="Capacete de Diamante">
                    <h4>Capacete de Diamante</h4>
                </div>
                <div class="kit-item" data-item="chestplate_soberano" data-kit="Kit Magna Soberano" data-preco="R$2,00">
                    <img src="png/Diamond_Chestplate.png" alt="Peitoral de Diamante">
                    <h4>Peitoral de Diamante</h4>
                </div>
                <div class="kit-item" data-item="leggings_soberano" data-kit="Kit Magna Soberano" data-preco="R$2,00">
                    <img src="png/Diamond_Leggings.png" alt="CalÃ§a de Diamante">
                    <h4>CalÃ§a de Diamante</h4>
                </div>
                <div class="kit-item" data-item="boots_soberano" data-kit="Kit Magna Soberano" data-preco="R$2,00">
                    <img src="png/Diamond_Boots.png" alt="Botas de Diamante">
                    <h4>Botas de Diamante</h4>
                </div>
            </div>
        </section>
    </main>

    <div class="item-modal-backdrop" id="item-modal-backdrop" aria-hidden="true">
        <div class="item-modal" role="dialog" aria-modal="true" aria-labelledby="item-modal-title">
            <div class="item-modal-icon" id="item-modal-icon"></div>
            <h2 id="item-modal-title"></h2>
            <div class="item-modal-meta" id="item-modal-meta"></div>
            <p id="item-modal-desc"></p>
            <div id="item-modal-enchants"></div>
            <button class="item-modal-close" id="item-modal-close">Fechar</button>
        </div>
    </div>

    <div class="item-modal-backdrop" id="buy-modal-backdrop" aria-hidden="true">
        <div class="item-modal" role="dialog" aria-modal="true" aria-labelledby="buy-modal-title">
            <div class="item-modal-icon">
                <img src="png/Magma_Cube.png" alt="Comprar Kit">
            </div>
            <h2 id="buy-modal-title">AtenÃ§Ã£o!</h2>
            <p>VocÃª serÃ¡ levado ao canal ðŸ’°ãƒ»loja_comprar para finalizar a compra do kit.</p>
            <div class="item-modal-actions">
                <a class="item-modal-confirm" id="buy-modal-link" href="https://discord.com/channels/1467346816403243233/1467562728108458140" target="_blank" rel="noopener noreferrer">Ir para o Discord</a>
                <button class="item-modal-close" id="buy-modal-close">Cancelar</button>
            </div>
        </div>
    </div>

    <script src="../../script.js"></script>
    <script>
        (function() {
            const produtos = {
                espadadima: {
                    img: 'png/espadadima.gift',
                    titulo: 'Espada de Diamante',
                    desc: 'Uma espada poderosa feita de diamante.'
                },
                picaretadima: {
                    img: 'png/picaretadima.gift',
                    titulo: 'Picareta de Diamante',
                    desc: 'Picareta resistente para mineraÃ§Ã£o avanÃ§ada.'
                },
                machadodima: {
                    img: 'png/machadodima.gift',
                    titulo: 'Machado de Diamante',
                    desc: 'Machado afiado para cortar madeira rapidamente.'
                },
                padima: {
                    img: 'png/padima.gift',
                    titulo: 'PÃ¡ de Diamante',
                    desc: 'PÃ¡ ultra resistente para escavaÃ§Ã£o rÃ¡pida.'
                },
                helmet: {
                    img: 'png/Diamond_Helmet.png',
                    titulo: 'Capacete de Diamante',
                    desc: 'Capacete de diamante sem encantamentos.'
                },
                chestplate: {
                    img: 'png/Diamond_Chestplate.png',
                    titulo: 'Peitoral de Diamante',
                    desc: 'Peitoral de diamante sem encantamentos.'
                },
                leggings: {
                    img: 'png/Diamond_Leggings.png',
                    titulo: 'CalÃ§a de Diamante',
                    desc: 'CalÃ§a de diamante sem encantamentos.'
                },
                boots: {
                    img: 'png/Diamond_Boots.png',
                    titulo: 'Botas de Diamante',
                    desc: 'Botas de diamante sem encantamentos.'
                }
            };
            let encantamentos = {};

            const backdrop = document.getElementById('item-modal-backdrop');
            const icon = document.getElementById('item-modal-icon');
            const title = document.getElementById('item-modal-title');
            const meta = document.getElementById('item-modal-meta');
            const desc = document.getElementById('item-modal-desc');
            const enchantsBox = document.getElementById('item-modal-enchants');
            const closeBtn = document.getElementById('item-modal-close');
            const buyBackdrop = document.getElementById('buy-modal-backdrop');
            const buyLink = document.getElementById('buy-modal-link');
            const buyClose = document.getElementById('buy-modal-close');

            fetch('encantamentos.json')
                .then((res) => res.json())
                .then((data) => { encantamentos = data || {}; })
                .catch(() => { encantamentos = {}; });

            function openModal(itemId, kit, preco) {
                const baseId = itemId.replace('_soberano', '');
                const data = produtos[baseId];
                if (!data) return;
                icon.innerHTML = `<img src=\"${data.img}\" alt=\"${data.titulo}\">`;
                title.textContent = data.titulo;
                const kitIcon = kit.includes('Soberano') ? 'png/Magma_Cube_SUPER.png' : 'png/Magma_Cube.png';
                meta.innerHTML = `
                    <span class="kit-name">
                        <img src="${kitIcon}" alt="${kit}">
                        ${kit}
                    </span>
                    <span class="price">${preco}</span>
                `;
                desc.textContent = data.desc || '';
                const enchants = encantamentos[itemId] || [];
                if (enchants.length) {
                    enchantsBox.innerHTML = `
                        <div class="enchants-box">
                            ${enchants.map((e) => `
                                <div class="enchant-item">
                                    <span class="enchant-icon">
                                        <img src="png/Enchanted_Book.png" alt="Livro Encantado">
                                    </span>
                                    <span class="enchant-nome">${e.nome}</span>
                                    <span class="enchant-nivel">${e.nivel}</span>
                                </div>
                            `).join('')}
                        </div>
                    `;
                } else {
                    enchantsBox.innerHTML = '';
                }
                backdrop.classList.add('open');
                backdrop.setAttribute('aria-hidden', 'false');
            }

            function closeModal() {
                backdrop.classList.remove('open');
                backdrop.setAttribute('aria-hidden', 'true');
            }

            document.querySelectorAll('.kit-item').forEach((card) => {
                card.addEventListener('click', () => {
                    const itemId = card.getAttribute('data-item');
                    const kit = card.getAttribute('data-kit') || '';
                    const preco = card.getAttribute('data-preco') || '';
                    openModal(itemId, kit, preco);
                });
            });

            document.querySelectorAll('.kit-buy').forEach((btn) => {
                btn.addEventListener('click', (e) => {
                    e.preventDefault();
                    const link = btn.getAttribute('data-discord') || '#';
                    buyLink.setAttribute('href', link);
                    buyBackdrop.classList.add('open');
                    buyBackdrop.setAttribute('aria-hidden', 'false');
                });
            });

            closeBtn.addEventListener('click', closeModal);
            backdrop.addEventListener('click', (e) => {
                if (e.target === backdrop) closeModal();
            });
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') closeModal();
            });

            function closeBuyModal() {
                buyBackdrop.classList.remove('open');
                buyBackdrop.setAttribute('aria-hidden', 'true');
            }

            buyClose.addEventListener('click', closeBuyModal);
            buyBackdrop.addEventListener('click', (e) => {
                if (e.target === buyBackdrop) closeBuyModal();
            });
        })();
    </script>
</body>
</html>
